# NPGIS简介

## 一、GIS知识简介

地理信息系统（`Geographic Information System` 或 `Geo－Information system`，GIS）有时又称为“地学信息系统”。它是一种特定的十分重要的空间信息系统。它是在计算机硬、软件系统支持下，对整个或部分地球表层（包括大气层）空间中的有关地理分布数据进行采集、储存、管理、运算、分析、显示和描述的技术系统。



## 二、OGC标准

开放地理空间信息联盟 （`Open Geospatial Consortium-OGC`），致力于提供地理信息行业软件和数据及服务的标准化工作。

`OGC`是一个非盈利的志愿的国际标准化组织，引领着空间地理信息标准及定位基本服务的发展。在空间数据互操作领域，基于公共接口访问模式的互操作方法是一种基本的操作方法。通过国际标准化组织（`ISO/TC211`）或技术联盟（如OGC）制定空间数据互操作的接口规范，GIS软件商开发遵循这一接口规范的空间数据的读写函数，可以实现异构空间数据库的互操作。

### 2.1 地图服务

Web地图服务（[WMS](http://baike.baidu.com/view/302053.htm)）利用具有地理空间位置信息的数据制作地图。其中将地图定义为地理数据可视的表现。这个规范定义了三个操作：

* `GetCapabilities` 返回服务级元数据，它是对服务信息内容和要求参数的一种描述；

* `GetMap` 返回一个地图影像，其地理空间参考和大小参数是明确定义了的；

* `GetFeatureInfo`（可选）返回显示在地图上的某些特殊要素的信息。

  

### 2.2 矢量服务

Web地图服务返回的是图层级的地图影像，Web矢量服务（[WFS](http://baike.baidu.com/view/1852530.htm)）返回的是矢量级的GML编码，并提供对矢量的增加、修改、删除等事务操作，是对Web地图服务的进一步深入。OGC Web矢量服务允许[客户端](http://baike.baidu.com/view/930.htm)从多个Web矢量服务中取得使用[地理标记语言](http://baike.baidu.com/view/6219161.htm)（GML）编码的[地理空间数据](http://baike.baidu.com/view/4334522.htm)，这个服务定义了五个操作：

* `GetCapabilites` 返回Web矢量服务性能描述文档（用XML描述）；
* `DescribeFeatureType` 返回描述可以提供服务的任何矢量结构的XML文档；
* `GetFeature` 为一个获取矢量实例的请求提供服务；
* `Transaction` 为事务请求提供服务；
* `LockFeature` 处理在一个事务期间对一个或多个矢量类型实例上锁的请求。



### 2.3 栅格服务

Web栅格服务（[WCS](http://baike.baidu.com/view/1148142.htm)）面向空间影像数据，它将包含地理位置值的[地理空间数据](http://baike.baidu.com/view/4334522.htm)作为“栅格（Coverage）”在网上相互交换。网络栅格服务由三种操作组成：`GetCapabilities`，`GetCoverage` 和 `DescribeCoverageType`。

* GetCapabilities操作返回描述服务和数据集的XML文档。
* 网络栅格服务中的GetCoverage操作是在GetCapabilities确定什么样的查询可以执行、什么样的数据能够获取之后执行的，它使用通用的栅格格式返回地理位置的值或属性。
* DescribeCoverageType操作允许[客户端](http://baike.baidu.com/view/930.htm)请求由具体的WCS服务器提供的任一覆盖层的完全描述。

以上三个规范既可以做为Web服务的[空间数据](http://baike.baidu.com/view/125911.htm)服务规范，又可以实现空间数据的相互操作。只要某一个GIS软件支持这个接口，部署在本地服务器上，其他GIS软件就可以通过这个接口得到所需要的数据。从技术实现的角度，可以将Web服务理解为一个[应用程序](http://baike.baidu.com/view/330120.htm)，它向外界暴露出一个能通过Web进行调用的接口，允许被任何平台、任何系统，用任何语言编写的程序调用。

这个[应用程序](http://baike.baidu.com/view/330120.htm)可以用现有的各种编程语言实现。Web服务最大的特点是可以实现跨平台、跨语言、跨硬件的互操作，正是Web服务中的SOAP、WSDL和UDDI保证了Web服务的跨平台互操作的特性，所以，如何使用SOAP、WSDL和UDDI来部署、描述、传输和注册一个Web服务是实现Web服务的关键。由于SOAP、WSDL和UDDI是一套标准，不同的厂商可以有实现这些标准的不同产品，例如SUN、APACHE、IBM、Borland等公司推出的基于JAVA平台的Web服务工具包，以及[微软](http://baike.baidu.com/view/2353.htm)提出的.NET平台等，这些工具为实现Web服务的开发、部署、描述提供了方便的工具，极大的降低了开发Web服务的复杂度。



## 三、GIS实现方法

### 3.1 信息来源

如果能将你所在州的降雨和你所在县上空的照片联系起来，就可以判断出哪块湿地在一年的某些时候会干涸。一个GIS系统就能够进行这样的分析，它能够将不同来源的信息以不同的形式应用。对于源数据的基本要求是确定变量的位置。位置可能由经度、纬度和海拔的x，y，z坐标来标注，或是由其他地理编码系统比如ZIP码，又或是高速公路英里标志来表示。任何可以定位存放的变量都能被反馈到GIS。一些政府机构和非政府组织正在生产制作能够直接访问GIS的计算机数据库。可以将地图中不同类型的数据格式输入GIS。GIS系统同时能将不是地图形式的数字信息转换可识别利用的形式。例如，通过分析由遥感生成的数字卫星图像，可以生成一个与地图类似的有关植被覆盖的数字信息层。

同样，人口调查或水文表格数据也可在GIS系统中被转换成作为主题信息层的地图形式。

### 3.2 资料展现

GIS数据以数字数据的形式表现了现实世界客观对象(公路、土地利用、海拔)。 现实世界客观对象可被划分为二个抽象概念: 离散对象(如房屋) 和连续的对象领域(如降雨量或海拔)。这二种抽象体在GIS系统中存储数据主要的二种方法为：**栅格（网格）**和 **矢量**。

栅格（网格）数据由存放唯一值存储单元的行和列组成。它与栅格（网格）图像是类似的，除了使用合适的颜色之外，各个单元记录的数值也可能是一个分类组（例如土地使用状况）、一个连续的值（例如降雨量）或是当数据不是可用时记录的一个空值。栅格数据集的分辨率取决于地面单位的网格宽度。通常存储单元代表地面的方形区域，但也可以用来代表其它形状。栅格数据既可以用来代表一块区域，也可以用来表示一个实物。

矢量数据利用了几何图形例如点、线（一系列点坐标），或是面（形状决定于线）来表现客观对象。例如，在住房细分中以多边形来代表物产边界，以点来精确表示位置。矢量同样可以用来表示具有连续变化性的领域。利用等高线和不规则三角形格网（TIN）来表示海拔或其他连续变化的值。TIN的记录对于这些连接成一个由三角形构成的不规则网格的点进行评估。三角形所在的面代表地形表面。

利用栅格或矢量数据模型来表达现实既有优点也有缺点。栅格数据设置在面内所有的点上都记录同一个值，而矢量格式只在需要的地方存储数据，这就使得前者所需的存储的空间大于后者。对于栅格数据可以很轻易地实现覆盖的操作，而对于矢量数据来说要困难得多。矢量数据可以像在传统地图上的矢量图形一样被显示出来，而栅格数据在以图象显示时显示对象的边界将呈现模糊状。

除了以几何向量坐标或是栅格单元位置来表达的空间数据外，另外的非空间数据也可以被存储。在矢量数据中，这些附加数据为客观对象的属性。例如，一个森林资源的多边形可能包含一个标识符值及有关树木种类的信息。在栅格数据中单元值可存储属性信息，但同样可以作为与其他表格中记录相关的标识符。

### 3.3 **资料采集**

数据采集——向系统内输入数据——它占据了GIS从业者的大部分时间。有多种方法向GIS中输入数据，在其中它以数字格式存储。

印在纸或聚酯薄膜地图上的现有数据可以被数字化或扫描来产生数字数据。数字化仪从地图中产生向量数据作为操作符轨迹点、线和多边形的边界。扫描地图可以产生能被进一步处理生成向量数据的光栅数据。

测量数据可以从测量器械上的数字数据收集系统中被直接输入到GIS中。从全球定位系统（GPS）——另一种测量工具中得到的位置，也可以被直接输入到GIS中。遥感数据同样在数据收集中发挥着重要作用，并由附在平台上的多个传感器组成。传感器包括摄像机、数字扫描仪和激光雷达，而平台则通常由航空器和卫星构成。 大部分数字数据来源于图片判读和航空照片。软拷贝工作站用来数字化直接从数字图像的立体象对中得到的特征。这些系统允许数据以二维或三维捕捉，它们的海拔直接从用照相测量法原理的立体象对中测量得到。现今，模拟航空照片先被扫描然后再输入到软拷贝系统，但随着高质量的数字摄像机越来越便宜，这一步也就可被省略了。 卫星遥感提供了空间数据的另一个重要来源。这里卫星使用不同的传感器包来被动地测量从主动传感器如雷达发射出去的电磁波频谱或无线电波的部分的反射系数。遥感收集可以进一步处理来标识感兴趣的对象和类例如土地覆盖的光栅数据。

除了收集和输入空间数据之外，属性数据也要输入到GIS中。对于向量数据，这包括关于在系统中的对象的附加信息。

输入数据到GIS中后，通常还要编辑，来消除错误，或进一步处理。对于向量数据必须要“拓扑正确”才能进行一些高级分析。比如说，在公路网中，线必须与交叉点处的结点相连。像反冲或过冲的错误也必须消除。对于扫描的地图，源地图上的污点可能需要从生成的光栅中消除。例如，污物的斑点可能会把两条本不该相连的线连在一起。

### 3.4 资料操作

GIS可以执行数据重构来把数据转换成不同的格式。例如，GIS可以通过在具有相同分类的所有单元周围生成线，同时决定单元的空间关系，如邻接和包含，来将卫星图像转换成向量结构。

由于数字数据以不同的方法收集和存储，两种数据源可能会不完全兼容。因此GIS必须能够将地理数据从一种结构转换到另一种结构。

### 3.5 系统转换

财产所有权地图与土壤分布图可能以不同的比例尺显示数据。GIS中的地图数据必须能被操作以使其与从其它地图获得的数据对齐或相配合。在数字数据被分析前，它们可能得经过其它一些将它们整合进GIS的处理，比如，投影与坐标变换。 地球可以用多种模型来表示，对于地球表面上的任一给定点，各个模型都可能给出一套不同的坐标（如纬度，经度，海拔）。最简单的模型是假定地球是一个理想的球体。随着地球的更多测量逐渐累积，地球的模型也变得越来越复杂，越来越精确。事实上，有些模型应用于地球的不同区域以提供更高的精确度（如北美坐标系统，1983-NAD83-只适合在美国使用，而在欧洲却不适用）。

投影是制作地图的基础部分，它是从地球的一种模型中转换信息的数学方法，它将三维的弯曲表面转换成二维的媒介（比如纸或电脑屏幕）。不同类型的地图要采用不同的投影系统，因为每种投影系统有其自身的合适的用途。比如一种可以精确反映大陆形状的投影会歪曲大陆的相对尺寸（翻译的是英文的维基百科）

### 3.6 空间分析

空间分析能力是GIS的主要功能，也是GIS与计算机制图软件相区别的主要特征。空间分析是从空间物体的空间位置、联系等方面去研究空间事物，以及对空间事物做出定量的描述。一般地讲，它只回答What（是什么？）、Where（在哪里？）、How（怎么样？）等问题，但并不（能）回答Why（为什么？）。空间分析需要复杂的数学工具，其中最主要的是空间统计学、图论、拓扑学、计算几何等，其主要任务是对空间构成进行描述和分析，以达到获取、描述和认知空间数据；理解和解释地理图案的背景过程；空间过程的模拟和预测；调控地理空间上发生的事件等目的。

空间分析技术与许多学科有联系，地理学、经济学、区域科学、大气、 地球物理、水文等专门学科为其提供知识和机理。

除了GIS软件捆绑空间分析模块外，也有一些专用的空间分析软件，如GISLIB、SIM、PPA、Fragstats等。



## 四、NPGIS 介绍

  NPGIS sdk是一个专为GIS 客户端开发提供的类库包，用于接入Arcigis服务、Pgis 服务、谷歌离线地图、天地地图、QQ地图、高德地图、超图、百度地图、WMS等基于OGC标准的地图服务。 在操作方面，提供了地图的基本操作，如放大、缩小、平移等常用操作之外，还可以进行点、线、面绘制，加载聚合点位、热力图、路书等功能。

​      地图API可以快速开发基于空间信息服务的GIS应用网站系统，大大降低了开发成本和难度，二次开发用户可方便敏捷地扩展地理信息服务平台的体系机构，与行业部门业务应用系统集成，实现互联网公众增值业务应用系统。

## 五、NPGIS API 功能介绍

### 5.1 地图基本功能：

   地图提供常见的浏览器和自定义事件注册和注销，滚轮、键盘启用和禁用，设置zoom，设置中心点、平移、全图等功能。 

### 5.2 覆盖物

对于常见覆盖物包括线、多边形、圆、文本信息、标注、扇形、信息框，提供了较为丰富的接口，如拖放、修改、编辑、注册和注销浏览器事件和自定义事件、菜单等功能。 

### 5.3 常用控件

提供常见的地图控件，如版权、导航、鹰眼、比例尺、指北针等。 

### 5.4 工具

地图工具类 提供距离测量和面积测量。 

### 5.5 聚合

提供聚合撒点功能，最大聚合4W点，chrome 效果最好，IE版本越高效果越好。

### 5.6 空间查询

路径规划

### 5.7 地图选择

框选和圈选

### 5.8 路书

提供单点或多点沿线运动。 

### 5.9 热力图

根据用户关注纬度不同地理区域的统计数，以特殊高亮的形式显示在地图上。 

### 5.10. 圆搜索

提供以圆半径为单位的搜索。 

### 5.11 缓冲区

提供用户指定距离的点、线、面缓冲区。 



## 六、NPGIS 官网

http://map.netposa.com:9500

 